<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI è¿›åŒ–å°é•‡ - æ²‰æµ¸å¼åŸ¹è®­ç­</title>
    
    <!-- æ ¸å¿ƒä¾èµ– -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

    <style>
        /* --- å…¨å±€æ ·å¼å®šä¹‰ --- */
        :root {
            --bg-dark: #0f172a;
            --pixel-font: 'Press Start 2P', cursive;
        }
        body {
            background-color: var(--bg-dark);
            color: white;
            font-family: var(--pixel-font);
            overflow: hidden;
            user-select: none;
        }

        /* åƒç´ åŒ–æ¸²æŸ“ */
        .pixelated {
            image-rendering: pixelated;
        }

        /* ç»ç’ƒæ‹Ÿæ€é¢æ¿ */
        .glass-panel {
            background: rgba(15, 23, 42, 0.85);
            backdrop-filter: blur(8px);
            border: 2px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
        }

        /* æ‰«æçº¿ç‰¹æ•ˆ */
        .scanlines {
            background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.1));
            background-size: 100% 4px;
            position: fixed; inset: 0; pointer-events: none; z-index: 50;
        }

        /* åœ°å½¢çº¹ç† (çº¯CSSç»˜åˆ¶) */
        .tile-grass {
            background-color: #22c55e;
            background-image: radial-gradient(#15803d 15%, transparent 16%), radial-gradient(#15803d 15%, transparent 16%);
            background-size: 16px 16px;
            background-position: 0 0, 8px 8px;
        }
        .tile-path {
            background-color: #64748b;
            background-image: linear-gradient(45deg, #475569 25%, transparent 25%, transparent 75%, #475569 75%, #475569), linear-gradient(45deg, #475569 25%, transparent 25%, transparent 75%, #475569 75%, #475569);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
        }
        .tile-wall {
            background-color: #334155;
            background-image: linear-gradient(to right, #1e293b 1px, transparent 1px), linear-gradient(to bottom, #1e293b 1px, transparent 1px);
            background-size: 8px 8px;
            box-shadow: inset 0 0 10px #000;
        }

        /* è§’è‰²å‘¼å¸åŠ¨ç”» */
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-4px); } }
        .npc-float { animation: float 2s infinite ease-in-out; }

        /* ç®€å•çš„æ‰“å­—æœºå…‰æ ‡ */
        .cursor-blink::after { content: '|'; animation: blink 1s infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- 1. æ¸¸æˆé…ç½® ---
        const CELL_SIZE = 48; // æ¯ä¸ªæ ¼å­çš„åƒç´ å¤§å°
        const MAP_WIDTH = 16;
        const MAP_HEIGHT = 12;
        
        // åœ°å›¾æ•°æ®: 0=è‰åœ°, 1=è·¯, 9=å¢™/éšœç¢
        const INITIAL_MAP = [
            [9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],
            [9,0,0,0,0,0,9,0,0,0,0,0,0,0,0,9],
            [9,0,0,0,0,0,9,0,0,0,0,0,0,0,0,9],
            [9,0,1,1,1,1,1,1,1,1,1,0,0,0,0,9],
            [9,0,1,0,0,0,1,0,0,0,1,0,0,0,0,9],
            [9,0,1,0,0,0,1,0,0,0,1,1,1,1,0,9],
            [9,0,1,1,1,0,1,0,0,0,0,0,0,1,0,9],
            [9,0,0,0,1,0,1,1,1,0,0,0,0,1,0,9],
            [9,0,0,0,1,0,0,0,1,0,0,0,0,1,0,9],
            [9,0,1,1,1,1,1,1,1,1,1,1,1,1,0,9],
            [9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9],
            [9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],
        ];

        // NPC å®šä¹‰
        const NPCS = [
            { id: 1, name: "æç¤ºè¯å¤§å¸ˆ", title: "ä¸‰æ¿æ–§æ•™å­¦", x: 4, y: 5, avatar: "ğŸ§™â€â™‚ï¸", color: "text-purple-400", type: "prompt", desc: "è¯·ç”¨ç»“æ„åŒ–æç¤ºè¯ï¼ˆè§’è‰²+ä»»åŠ¡+è¦æ±‚ï¼‰æè¿°ä½ è¦è®©AIå†™ä¸€é¦–è¯—ã€‚" },
            { id: 2, name: "å…‰å½±ç”»å¸ˆ", title: "Midjourney ä¸“å®¶", x: 10, y: 3, avatar: "ğŸ¨", color: "text-pink-400", type: "image", desc: "è¯·å†™å‡ºç”Ÿæˆä¸€å¼ èµ›åšæœ‹å…‹çŒ«çš„æç¤ºè¯ï¼Œéœ€åŒ…å«ï¼šä¸»ä½“ã€é£æ ¼ã€å‚æ•°ã€‚" },
            { id: 3, name: "è§†é¢‘å¯¼æ¼”", title: "Sora å¯¼å¸ˆ", x: 13, y: 9, avatar: "ğŸ¬", color: "text-blue-400", type: "video", desc: "å†™ä¸€ä¸ªè§†é¢‘è¿é•œæŒ‡ä»¤ï¼šåŒ…å«æ¨é•œå¤´(Dolly In)å’Œä¸»ä½“æè¿°ã€‚" },
            { id: 4, name: "Coze æ¶æ„å¸ˆ", title: "Agent æ­å»º", x: 2, y: 9, avatar: "ğŸ¤–", color: "text-green-400", type: "coze", desc: "æ­å»ºä¸€ä¸ª Bot éœ€è¦å“ªä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ï¼Ÿ" }
        ];

        // æ¨¡æ‹Ÿæ’è¡Œæ¦œæ•°æ®
        const MOCK_LEADERBOARD = [
            { name: "å¼ ä¼Ÿ", score: 2450 },
            { name: "Emily", score: 2100 },
            { name: "Li Hua", score: 1850 },
            { name: "ç‹å¤§é”¤", score: 1600 },
            { name: "TechBoy", score: 1200 },
        ];

        // --- 2. æ ¸å¿ƒç»„ä»¶ ---

        function App() {
            // ç©å®¶çŠ¶æ€
            const [pos, setPos] = useState({ x: 7, y: 6 });
            const [direction, setDirection] = useState('down'); // up, down, left, right
            const [score, setScore] = useState(0);
            const [inventory, setInventory] = useState([]);
            const [playerAvatar, setPlayerAvatar] = useState(null); // ç”¨æˆ·ä¸Šä¼ å¤´åƒ
            
            // äº¤äº’çŠ¶æ€
            const [activeNPC, setActiveNPC] = useState(null); // å½“å‰å¯¹è¯çš„ NPC
            const [chatInput, setChatInput] = useState("");
            const [chatHistory, setChatHistory] = useState([]); // åŠ©æ•™èŠå¤©è®°å½•
            const [showHelper, setShowHelper] = useState(false);
            const [leaderboard, setLeaderboard] = useState(MOCK_LEADERBOARD);

            // ç§»åŠ¨é€»è¾‘
            useEffect(() => {
                const handleKeyDown = (e) => {
                    if (activeNPC || showHelper) return; // å¯¹è¯æ—¶ç¦æ­¢ç§»åŠ¨

                    let dx = 0, dy = 0;
                    let newDir = direction;

                    if (['w', 'W', 'ArrowUp'].includes(e.key)) { dy = -1; newDir = 'up'; }
                    else if (['s', 'S', 'ArrowDown'].includes(e.key)) { dy = 1; newDir = 'down'; }
                    else if (['a', 'A', 'ArrowLeft'].includes(e.key)) { dx = -1; newDir = 'left'; }
                    else if (['d', 'D', 'ArrowRight'].includes(e.key)) { dx = 1; newDir = 'right'; }
                    else return;

                    const newX = pos.x + dx;
                    const newY = pos.y + dy;

                    // ç¢°æ’æ£€æµ‹
                    if (INITIAL_MAP[newY] && INITIAL_MAP[newY][newX] !== 9) {
                        setPos({ x: newX, y: newY });
                    }
                    setDirection(newDir);
                };

                window.addEventListener('keydown', handleKeyDown);
                return () => window.removeEventListener('keydown', handleKeyDown);
            }, [pos, activeNPC, showHelper]);

            // äº¤äº’æ£€æµ‹ (å½“ä½ èµ°åˆ° NPC æ—è¾¹)
            useEffect(() => {
                const nearbyNPC = NPCS.find(npc => Math.abs(npc.x - pos.x) + Math.abs(npc.y - pos.y) <= 1);
                if (nearbyNPC && !activeNPC) {
                    // è‡ªåŠ¨å¼¹å‡ºäº¤äº’æç¤ºï¼Œè¿™é‡Œç®€åŒ–ä¸ºç›´æ¥æŒ‰ç©ºæ ¼æˆ–ç‚¹å‡»è§¦å‘ï¼Œ
                    // ä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªçŠ¶æ€æ¥æ˜¾ç¤ºâ€œæŒ‰ç©ºæ ¼å¯¹è¯â€
                }
            }, [pos]);

            // æ¨¡æ‹Ÿæ’è¡Œæ¦œå®æ—¶å˜åŒ–
            useEffect(() => {
                const interval = setInterval(() => {
                    setLeaderboard(prev => {
                        const newBoard = [...prev];
                        const randomIdx = Math.floor(Math.random() * newBoard.length);
                        newBoard[randomIdx].score += 10;
                        return newBoard.sort((a, b) => b.score - a.score);
                    });
                }, 5000);
                return () => clearInterval(interval);
            }, []);

            // å¤´åƒä¸Šä¼ å¤„ç†
            const handleAvatarUpload = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onloadend = () => setPlayerAvatar(reader.result);
                    reader.readAsDataURL(file);
                }
            };

            // Coze éªŒè¯é€»è¾‘ (Mock)
            const handleCozeValidation = () => {
                if (!activeNPC) return;

                // æ¨¡æ‹Ÿ API è°ƒç”¨å»¶è¿Ÿ
                const loadingMsg = "Coze æ™ºèƒ½ä½“æ­£åœ¨æ€è€ƒ...";
                
                // ç®€å•çš„å…³é”®è¯éªŒè¯é€»è¾‘ (MVP)
                let passed = false;
                let feedback = "";
                
                if (activeNPC.type === 'prompt') {
                    if (chatInput.includes("è§’è‰²") && chatInput.includes("ä»»åŠ¡") && chatInput.includes("è¦æ±‚")) {
                        passed = true;
                        feedback = "å®Œç¾çš„ç»“æ„åŒ–æç¤ºè¯ï¼é€»è¾‘æ¸…æ™°ï¼";
                    } else {
                        feedback = "ç¼ºå°‘æ ¸å¿ƒè¦ç´ ã€‚è¯·ç¡®ä¿åŒ…å« 'è§’è‰²'ã€'ä»»åŠ¡' å’Œ 'è¦æ±‚'ã€‚";
                    }
                } else if (activeNPC.type === 'image') {
                    if (chatInput.includes("ä¸»ä½“") && chatInput.includes("é£æ ¼")) {
                        passed = true;
                        feedback = "è¿™å¹…ç”»ä¸€å®šä¼šå¾ˆæ£’ï¼å‚æ•°è®¾ç½®åˆç†ã€‚";
                    } else {
                        feedback = "Midjourney çœ‹ä¸æ‡‚ã€‚è¯·æè¿° 'ä¸»ä½“' å’Œ 'é£æ ¼'ã€‚";
                    }
                } else {
                    passed = true; // å…¶ä»– NPC é»˜è®¤é€šè¿‡
                    feedback = "å›ç­”æ­£ç¡®ï¼";
                }

                if (passed) {
                    setScore(s => s + 100);
                    // 1% æ‰è½æ¦‚ç‡
                    if (Math.random() < 0.99) { // ä¸ºäº†æ¼”ç¤ºæ”¹æˆäº† 99%ï¼Œå®é™…åº”ä¸º 0.01
                         // è¿™é‡Œæ¼”ç¤ºç”¨ï¼Œå®é™…æ”¹æˆ < 0.01
                         const prize = "âœ¨ NVIDIA RTX 4090 (è™šæ‹Ÿç‰ˆ)";
                         if (!inventory.includes(prize)) {
                             setInventory([...inventory, prize]);
                             alert(`è¿æ°”çˆ†æ£šï¼NPC æ‰è½äº†ç¨€æœ‰ç‰©å“ï¼š${prize}`);
                         }
                    }
                    alert(`âœ… é€šå…³æˆåŠŸï¼\nAI è¯„ä»·ï¼š${feedback}\nç§¯åˆ† +100`);
                    setActiveNPC(null);
                    setChatInput("");
                } else {
                    alert(`âŒ éªŒè¯å¤±è´¥\nAI è¯„ä»·ï¼š${feedback}\nè¯·é‡è¯•ï¼`);
                }
            };

            // AI åŠ©æ•™é—®ç­”
            const handleHelperAsk = () => {
                const answer = "è¿™æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿçš„ AI åŠ©æ•™å›å¤ã€‚åœ¨çœŸå®ç‰ˆæœ¬ä¸­ï¼Œè¿™é‡Œä¼šè¿æ¥ Coze API æ¥è§£ç­”ä½ å…³äº " + (chatInput || "AI") + " çš„é—®é¢˜ã€‚";
                setChatHistory([...chatHistory, { role: 'user', text: chatInput }, { role: 'ai', text: answer }]);
                setChatInput("");
            };

            return (
                <div className="w-full h-screen relative flex items-center justify-center bg-black">
                    <div className="scanlines"></div>

                    {/* --- å·¦ä¾§æ ï¼šä¿¡æ¯é¢æ¿ --- */}
                    <div className="absolute left-4 top-4 bottom-4 w-64 glass-panel rounded-xl p-4 flex flex-col gap-4 z-20">
                        {/* ä¸ªäººä¿¡æ¯ */}
                        <div className="flex flex-col items-center border-b border-white/10 pb-4">
                            <label className="relative cursor-pointer group">
                                <div className="w-20 h-20 rounded-full overflow-hidden border-2 border-yellow-400 bg-slate-700">
                                    {playerAvatar ? (
                                        <img src={playerAvatar} className="w-full h-full object-cover" />
                                    ) : (
                                        <div className="w-full h-full flex items-center justify-center text-2xl">ğŸ‘¤</div>
                                    )}
                                </div>
                                <div className="absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 text-[8px]">
                                    ä¸Šä¼ å¤´åƒ
                                </div>
                                <input type="file" className="hidden" accept="image/*" onChange={handleAvatarUpload} />
                            </label>
                            <h2 className="mt-2 text-yellow-400">å­¦å‘˜ No.9527</h2>
                            <div className="text-xs text-gray-400">ç§¯åˆ†: {score}</div>
                        </div>

                        {/* ç‰©å“æ  */}
                        <div className="flex-1 overflow-y-auto">
                            <h3 className="text-xs text-blue-400 mb-2 border-b border-blue-400/30 pb-1">ğŸ’ èƒŒåŒ…</h3>
                            {inventory.length === 0 ? (
                                <div className="text-[10px] text-gray-600 italic">æš‚æ— æˆ˜åˆ©å“</div>
                            ) : (
                                inventory.map((item, i) => (
                                    <div key={i} className="text-[10px] bg-white/5 p-1 mb-1 rounded text-yellow-200 border border-yellow-500/30">
                                        {item}
                                    </div>
                                ))
                            )}
                        </div>

                        {/* å®æ—¶æ’è¡Œæ¦œ */}
                        <div className="flex-1">
                            <h3 className="text-xs text-red-400 mb-2 border-b border-red-400/30 pb-1">ğŸ† å®æ—¶æ¦œå•</h3>
                            <div className="flex flex-col gap-2">
                                {leaderboard.map((u, i) => (
                                    <div key={i} className="flex justify-between text-[10px]">
                                        <span className={i===0 ? "text-yellow-400" : "text-gray-300"}>
                                            {i+1}. {u.name}
                                        </span>
                                        <span className="text-gray-500">{u.score}</span>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* --- ä¸­é—´ï¼šæ¸¸æˆåœ°å›¾åŒºåŸŸ --- */}
                    <div className="relative glass-panel rounded-xl overflow-hidden shadow-2xl" 
                         style={{ width: MAP_WIDTH * CELL_SIZE, height: MAP_HEIGHT * CELL_SIZE }}>
                        
                        {/* 1. æ¸²æŸ“åœ°å›¾å±‚ */}
                        {INITIAL_MAP.map((row, y) => (
                            <div key={y} className="flex">
                                {row.map((cell, x) => (
                                    <div key={`${x}-${y}`} 
                                         className={`
                                            w-[48px] h-[48px] border-white/5 border-[0.5px]
                                            ${cell === 0 ? 'tile-grass' : ''}
                                            ${cell === 1 ? 'tile-path' : ''}
                                            ${cell === 9 ? 'tile-wall' : ''}
                                         `}
                                    />
                                ))}
                            </div>
                        ))}

                        {/* 2. æ¸²æŸ“ NPC */}
                        {NPCS.map(npc => (
                            <div key={npc.id} 
                                 className="absolute flex flex-col items-center justify-center transition-all duration-300 npc-float cursor-pointer z-10"
                                 style={{ left: npc.x * CELL_SIZE, top: npc.y * CELL_SIZE, width: CELL_SIZE, height: CELL_SIZE }}
                                 onClick={() => {
                                     if (Math.abs(npc.x - pos.x) + Math.abs(npc.y - pos.y) <= 1.5) {
                                         setActiveNPC(npc);
                                         setChatInput("");
                                     }
                                 }}
                            >
                                <div className="text-3xl filter drop-shadow-md">{npc.avatar}</div>
                                <div className={`text-[8px] bg-black/70 px-1 rounded ${npc.color} whitespace-nowrap -mt-1`}>
                                    {npc.name}
                                </div>
                                {/* ä»»åŠ¡å¹å· */}
                                <div className="absolute -top-2 right-0 w-3 h-3 bg-yellow-500 rounded-full animate-bounce"></div>
                            </div>
                        ))}

                        {/* 3. æ¸²æŸ“ç©å®¶ */}
                        <div className="absolute transition-all duration-200 z-20 flex flex-col items-center"
                             style={{ left: pos.x * CELL_SIZE, top: pos.y * CELL_SIZE, width: CELL_SIZE, height: CELL_SIZE }}>
                            <div className="w-10 h-10 rounded-full border-2 border-white shadow-lg overflow-hidden bg-blue-600 relative">
                                {playerAvatar ? (
                                    <img src={playerAvatar} className="w-full h-full object-cover" />
                                ) : (
                                    <div className="w-full h-full flex items-center justify-center">ğŸ˜</div>
                                )}
                            </div>
                            <div className="text-[8px] bg-blue-600 px-1 rounded text-white mt-[-4px]">Me</div>
                        </div>

                    </div>

                    {/* --- å¯¹è¯æ¡† / ä»»åŠ¡éªŒè¯æ¡† (æ¨¡æ€) --- */}
                    {activeNPC && (
                        <div className="absolute inset-0 bg-black/60 z-50 flex items-center justify-center backdrop-blur-sm">
                            <div className="glass-panel w-[500px] p-6 rounded-xl relative flex flex-col gap-4 animate-[fadeIn_0.3s]">
                                <button onClick={() => setActiveNPC(null)} className="absolute top-4 right-4 text-gray-400 hover:text-white">âœ•</button>
                                
                                <div className="flex gap-4 items-center border-b border-white/10 pb-4">
                                    <div className="text-4xl">{activeNPC.avatar}</div>
                                    <div>
                                        <h2 className={`text-lg ${activeNPC.color}`}>{activeNPC.name}</h2>
                                        <p className="text-xs text-gray-400">{activeNPC.title} | Coze æ™ºèƒ½ä½“æ”¯æŒ</p>
                                    </div>
                                </div>

                                <div className="bg-black/30 p-4 rounded text-sm text-gray-200 border border-white/5">
                                    <span className="text-yellow-400 font-bold">ä»»åŠ¡ç›®æ ‡ï¼š</span>
                                    {activeNPC.desc}
                                </div>

                                <textarea 
                                    className="w-full h-32 bg-slate-800 p-3 rounded text-xs text-white border border-gray-600 focus:border-blue-500 outline-none resize-none font-mono"
                                    placeholder="åœ¨æ­¤è¾“å…¥ä½ çš„æç¤ºè¯ä½œä¸š..."
                                    value={chatInput}
                                    onChange={(e) => setChatInput(e.target.value)}
                                ></textarea>

                                <button 
                                    onClick={handleCozeValidation}
                                    className="w-full py-3 bg-blue-600 hover:bg-blue-500 text-white rounded font-bold shadow-lg transition-all active:scale-95 flex items-center justify-center gap-2"
                                >
                                    <i className="ph ph-check-circle"></i> æäº¤ä½œä¸š (éªŒè¯)
                                </button>
                                <div className="text-[10px] text-center text-gray-500">1% æ¦‚ç‡æ‰è½ç¥ç§˜å¤§å¥–</div>
                            </div>
                        </div>
                    )}

                    {/* --- éšèº«åŠ©æ•™ (æµ®åŠ¨æŒ‰é’®) --- */}
                    <div className="fixed bottom-6 right-6 z-50 flex flex-col items-end gap-2">
                        {showHelper && (
                            <div className="glass-panel w-64 h-80 p-3 rounded-xl flex flex-col gap-2 mb-2 animate-[slideUp_0.3s]">
                                <div className="flex justify-between items-center border-b border-white/10 pb-2">
                                    <span className="text-xs text-green-400">ğŸ¤– AI åŠ©æ•™</span>
                                    <button onClick={() => setShowHelper(false)} className="text-xs hover:text-white">æ”¶èµ·</button>
                                </div>
                                <div className="flex-1 overflow-y-auto space-y-2 text-[10px]">
                                    <div className="bg-white/10 p-2 rounded self-start">ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„åŠ©æ•™ï¼Œé‡åˆ°ä¸ä¼šçš„é¢˜å¯ä»¥é—®æˆ‘ã€‚</div>
                                    {chatHistory.map((msg, i) => (
                                        <div key={i} className={`p-2 rounded max-w-[90%] ${msg.role === 'user' ? 'bg-blue-600 self-end ml-auto' : 'bg-white/10 self-start'}`}>
                                            {msg.text}
                                        </div>
                                    ))}
                                </div>
                                <div className="flex gap-1">
                                    <input 
                                        type="text" 
                                        className="flex-1 bg-black/50 border border-gray-600 rounded px-2 text-[10px]"
                                        placeholder="è¾“å…¥é—®é¢˜..."
                                        value={chatInput} // å¤ç”¨ chatInput, å®é™…å¼€å‘åº”åˆ†ç¦»
                                        onChange={(e) => setChatInput(e.target.value)}
                                    />
                                    <button onClick={handleHelperAsk} className="bg-green-600 px-2 rounded text-[10px]">å‘é€</button>
                                </div>
                            </div>
                        )}
                        <button 
                            onClick={() => setShowHelper(!showHelper)}
                            className="w-12 h-12 bg-green-600 rounded-full flex items-center justify-center shadow-lg hover:scale-110 transition-transform border-2 border-white"
                        >
                            <span className="text-2xl">?</span>
                        </button>
                    </div>
                    
                    {/* æ“ä½œæç¤º */}
                    <div className="absolute bottom-4 left-1/2 -translate-x-1/2 text-xs text-gray-500 glass-panel px-4 py-1 rounded-full">
                        WASD ç§»åŠ¨ â€¢ èµ°åˆ° NPC æ—ç‚¹å‡»äº¤äº’
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
```

### ğŸ® å¦‚ä½•ä½¿ç”¨è¿™ä¸ªç³»ç»Ÿï¼Ÿ

1.  **å·¦ä¾§æ’è¡Œæ¦œ**ï¼šä½ ä¼šçœ‹åˆ°ä¸€ä¸ªå®æ—¶å˜åŠ¨çš„æ¦œå•ï¼Œæ¨¡æ‹Ÿäº†å…¶ä»–åŒå­¦æ­£åœ¨èµšå–ç§¯åˆ†ã€‚
2.  **ç§»åŠ¨**ï¼šä½¿ç”¨é”®ç›˜ `W/A/S/D` æˆ– `æ–¹å‘é”®` æ§åˆ¶ä½ çš„å¤´åƒåœ¨åœ°å›¾ä¸Šè¡Œèµ°ã€‚
3.  **NPC äº¤äº’**ï¼š
    * èµ°åˆ° **â€œä¸‰æ¿æ–§å¤§å¸ˆâ€ (å·¦ä¾§å·«å¸ˆ)** æ—è¾¹ï¼Œç‚¹å‡»ä»–ã€‚
    * å¼¹çª—ä¼šè¦æ±‚ä½ è¾“å…¥æç¤ºè¯ã€‚
    * **æµ‹è¯•é€šè¿‡**ï¼šè¾“å…¥åŒ…å«â€œè§’è‰²ã€ä»»åŠ¡ã€è¦æ±‚â€çš„ä¸€æ®µè¯ï¼ˆä¾‹å¦‚ï¼šâ€œä½ æ˜¯ä¸€ä¸ª**è§’è‰²**ï¼Œä½ çš„**ä»»åŠ¡**æ˜¯å†™è¯—ï¼Œ**è¦æ±‚**äº”è¨€ç»å¥â€ï¼‰ã€‚
    * **æµ‹è¯•å¤±è´¥**ï¼šéšä¾¿è¾“å…¥å‡ ä¸ªå­—ï¼ŒAI ä¼šæ‹’ç»ä½ ã€‚
4.  **éšæœºå¥–åŠ±**ï¼šå½“ä½ éªŒè¯æˆåŠŸï¼Œæœ‰æ¦‚ç‡ï¼ˆä»£ç é‡Œä¸ºäº†æ¼”ç¤ºè°ƒé«˜äº†æ¦‚ç‡ï¼‰å¼¹çª—æç¤ºä½ è·å¾—æ˜¾å¡ã€‚
5.  **AI åŠ©æ•™**ï¼šç‚¹å‡»å³ä¸‹è§’çš„ç»¿è‰²é—®å·æŒ‰é’®ï¼Œå¯ä»¥æ‰“å¼€åŠ©æ•™èŠå¤©æ¡†ã€‚

### ğŸ”§ æ‰©å±•å»ºè®® (æ¥å…¥çœŸå® Coze)

ç›®å‰çš„ `handleCozeValidation` å‡½æ•°æ˜¯æ¨¡æ‹Ÿçš„ã€‚å½“ä½ å‡†å¤‡å¥½ä¸Šçº¿æ—¶ï¼Œåªéœ€å°†è¯¥å‡½æ•°å†…çš„é€»è¾‘æ›¿æ¢ä¸ºçœŸå®çš„ `fetch` è¯·æ±‚ï¼š

```javascript
// æ›¿æ¢ä¸ºçœŸå®è°ƒç”¨
const response = await fetch('https://api.coze.com/open_api/v2/chat', {
    method: 'POST',
    headers: {
        'Authorization': 'Bearer YOUR_COZE_API_KEY',
        'Content-Type': 'application/json'
    },
    body: JSON.stringify({
        bot_id: "YOUR_BOT_ID", // å¯¹åº”ä¸‰æ¿æ–§å¤§å¸ˆçš„ Bot
        user: "unique_user_id",
        query: chatInput // å­¦ç”Ÿçš„ä½œä¸š
    })
});
// æ ¹æ® Coze è¿”å›çš„ç»“æœåˆ¤æ–­æ˜¯å¦é€šè¿‡