项目名称：AI 进化小镇 (AI Training Town)

版本：v2.0 (沉浸式 RPG 增强版)

类型：基于 Web 的游戏化 AI 技能培训平台

指令 (Instruction for AI/Cursor):
你是一位拥有丰富游戏开发经验的前端架构师，专精于 React 和 像素艺术 (Pixel Art) 风格。
请基于以下详细需求，编写一个生产级、单文件 (Single-file) 的 HTML 应用。
代码需包含完整的 HTML 结构、Tailwind CSS 样式和 React 交互逻辑。

1. 产品愿景 (Product Vision)

构建一个类似于“斯坦福小镇”的 2D 像素风虚拟社区。学员通过控制角色在地图上自由探索，与不同的“AI 技能大师 (NPC)”对话，完成结构化的 Prompt 编写任务，从而沉浸式地掌握 AI 技能。

3. 视觉设计规范 (Visual Design System)

核心风格: 赛博朋克 (Cyberpunk) + 像素风 (Pixel Art) + 暗色模式。

色调: 背景色 #0f172a (深蓝黑)，强调色 #facc15 (霓虹黄)、#22c55e (黑客绿)。

UI 组件: 玻璃拟态 (Glassmorphism) —— 背景半透明模糊，带有细微的白色边框和投影。

特效:

CRT 扫描线: 屏幕覆盖一层淡淡的横向扫描线，模拟老式显示器。

呼吸动画: 所有 NPC 和角色需有 CSS translateY 浮动动画。

地图纹理 (关键): 禁止使用外部图片素材绘制地形。必须使用 CSS linear-gradient 或 radial-gradient 编程绘制草地、石板路和墙壁的像素纹理。

4. 核心功能模块 (Core Features)

A. 自由探索系统 (Exploration)

地图引擎: 基于二维数组 (MAP_LAYOUT) 的网格地图。

0=草地, 1=路, 9=墙(不可通行)。

角色控制:

支持 WASD 和 方向键 控制角色上下左右移动。

实现碰撞检测：遇到墙壁或地图边缘不可穿过。

移动时要有平滑的 CSS 过渡效果。

B. 玩家个人中心 (Player Profile)

信息面板: 左侧固定悬浮栏。

头像系统: 支持 <input type="file"> 上传本地图片作为角色头像 (使用 FileReader 读取为 Base64)。

数据展示: 实时显示当前积分 (Score) 和学员 ID。

背包系统: 展示获得的战利品 (如随机掉落的奖品)。

实时排行榜: 模拟一个动态更新的排行榜列表，每隔几秒自动更新其他 NPC 学员的分数，营造竞争感。

C. NPC 交互与 Coze 验证 (Interaction & Validation)

交互逻辑: 当玩家坐标与 NPC 坐标相邻 (距离<=1) 时，允许交互。

NPC 类型:

三板斧大师 (Prompt): 验证是否包含“角色”、“任务”、“要求”三要素。

光影画师 (Image): 验证是否包含“主体”、“风格”。

视频导演 (Video): 验证运镜指令。

任务模态框 (Task Modal):

点击 NPC 弹出玻璃拟态窗口。

显示 NPC 立绘、名字、任务描述。

提供文本输入框 (<textarea>) 供学员输入作业。

验证逻辑 (模拟 Coze API):

点击“提交”后，显示“智能体思考中...”的 Loading 状态。

逻辑判断: 根据输入的关键词进行简单的正则匹配/包含判断。

反馈: 成功则加分并关闭弹窗；失败则给出具体提示 (如：“缺少主体描述”)。

D. 游戏化激励系统 (Gamification)

随机掉落 (Drop System): 每次验证成功，有 1% 的概率触发“稀有物品掉落”事件 (如：“获得 NVIDIA RTX 4090 虚拟显卡”)，并存入背包。

积分反馈: 验证成功 +100 分，并弹出 Alert 提示。

E. AI 助教 (AI Assistant)

形态: 右下角悬浮的“问号”按钮。

功能: 点击展开聊天窗口。

逻辑: 模拟一个对话界面，用户输入问题，系统自动回复预设的助教话术 (模拟连接知识库)。

5. 代码实现要求 (Implementation Details)

数据结构:

使用 useState 管理 pos (玩家坐标), score, inventory, activeNPC 等状态。

使用 useEffect 监听 keydown 事件。

健壮性: 确保地图数组访问不越界。

注释: 关键逻辑处 (如移动判断、Coze 验证模拟) 必须添加中文注释。

无图依赖: 除 DiceBear 头像 API 外，其余 UI 元素尽量使用 CSS 绘制或 Unicode Emoji，确保零素材依赖，开箱即用。

输出要求:
请依据以上文档，生成完整的 index.html 代码。