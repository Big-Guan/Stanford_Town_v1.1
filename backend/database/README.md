# æ•°æ®åº“ç®¡ç†å·¥å…·

## ğŸ“š æ–‡æ¡£ç´¢å¼•

- [æ•°æ®åº“é‡ç½®æŒ‡å—](./RESET_GUIDE.md) - è¯¦ç»†çš„é‡ç½®æ“ä½œè¯´æ˜
- [æ•°æ®åº“å¥åº·æ£€æŸ¥](./../db-health-check.js) - è‡ªåŠ¨æ£€æŸ¥å’Œè¿ç§»è„šæœ¬
- [æ•°æ®åº“ç»“æ„](./schema-aliyun.sql) - å®Œæ•´çš„æ•°æ®åº“è¡¨ç»“æ„

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ•°æ®åº“å¥åº·æ£€æŸ¥

```bash
cd backend
npm run db:health
```

æ£€æŸ¥æ•°æ®åº“è¿æ¥ã€è¡¨ç»“æ„ã€ç´¢å¼•ï¼Œå¹¶è‡ªåŠ¨æ‰§è¡Œå¿…è¦çš„è¿ç§»ã€‚

### æ•°æ®åº“é‡ç½®

```bash
# å®Œå…¨é‡ç½®ï¼ˆæ¸…ç©ºæ‰€æœ‰æ•°æ®ï¼‰
npm run db:reset

# åªé‡ç½®è¿›åº¦ï¼ˆä¿ç•™ç”¨æˆ·è´¦å·ï¼‰
npm run db:reset:progress
```

### æ•°æ®åº“åˆå§‹åŒ–

```bash
# é¦–æ¬¡éƒ¨ç½²æ—¶åˆå§‹åŒ–è¡¨ç»“æ„
npm run init:db
```

---

## ğŸ“‹ å¯ç”¨å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `npm run db:health` | æ£€æŸ¥æ•°æ®åº“å¥åº·çŠ¶æ€å¹¶è‡ªåŠ¨è¿ç§» |
| `npm run db:reset` | å®Œå…¨é‡ç½®ï¼ˆæ¸…ç©ºæ‰€æœ‰æ•°æ®ï¼‰ |
| `npm run db:reset:progress` | åªé‡ç½®è¿›åº¦ï¼ˆä¿ç•™ç”¨æˆ·ï¼‰ |
| `npm run db:reset:force` | å¼ºåˆ¶é‡ç½®ï¼ˆè·³è¿‡ç¡®è®¤ï¼‰ |
| `npm run init:db` | åˆå§‹åŒ–æ•°æ®åº“è¡¨ç»“æ„ |

---

## âš ï¸ é‡è¦æç¤º

1. **é‡ç½®å‰è¯·å¤‡ä»½æ•°æ®åº“**
2. **ç”Ÿäº§ç¯å¢ƒæ“ä½œéœ€è°¨æ…**
3. **è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ [RESET_GUIDE.md](./RESET_GUIDE.md)**

---

## ğŸ“Š æ•°æ®åº“ç»“æ„

### æ ¸å¿ƒè¡¨

- `users` - ç”¨æˆ·åŸºç¡€ä¿¡æ¯
- `user_progress` - ç”¨æˆ·æ¸¸æˆè¿›åº¦
- `task_completions` - ä»»åŠ¡å®Œæˆè®°å½•

### å…³é”®å­—æ®µ

- `user_progress.level_index` - å½“å‰å…³å¡ç´¢å¼•ï¼ˆv3 æ–°å¢ï¼‰
- `user_progress.completed_npcs` - å·²å®Œæˆçš„ NPC åˆ—è¡¨
- `user_progress.score` - ç”¨æˆ·ç§¯åˆ†

---

**æœ€åæ›´æ–°ï¼š** 2025-11-28
